(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{83411:function(e,n,t){Promise.resolve().then(t.bind(t,87861))},87861:function(e,n,t){"use strict";t.d(n,{default:function(){return x}});var a=t(57437),r=t(2265),s=t(63975),o=t.n(s),i=t(87138);let l={mfaToken:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M9 8h6V6q0-1.25-.875-2.125T12 3q-1.25 0-2.125.875T9 6zm9 15q-2.075 0-3.537-1.463T13 18q0-2.075 1.463-3.537T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23m1.65-2.65l.7-.7l-1.85-1.85V15h-1v3.2zM12.25 22H6q-.825 0-1.412-.587T4 20V10q0-.825.588-1.412T6 8h1V6q0-2.075 1.463-3.537T12 1q2.075 0 3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v1.3q-.5-.175-1-.238T18 11q-2.925 0-4.962 2.038T11 18q0 1.075.338 2.088T12.25 22"})}),discord:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02M8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12m6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12"})}),email:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M13.425 11.9q.275.2.575.2t.575-.2L21 7.425V5l-7 4.85L7 5v2.425zM3 21q-.825 0-1.412-.587T1 19V7.5q0-.425.288-.712T2 6.5q.425 0 .713.288T3 7.5V19h15.5q.425 0 .713.288T19.5 20q0 .425-.288.713T18.5 21zm4-4q-.825 0-1.412-.587T5 15V5q0-.825.588-1.412T7 3h14q.825 0 1.413.588T23 5v10q0 .825-.587 1.413T21 17z"})}),password:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:(0,a.jsx)("path",{fill:"currentColor",d:"M160 16a80.07 80.07 0 0 0-76.09 104.78l-57.57 57.56A8 8 0 0 0 24 184v40a8 8 0 0 0 8 8h40a8 8 0 0 0 8-8v-16h16a8 8 0 0 0 8-8v-16h16a8 8 0 0 0 5.66-2.34l9.56-9.57A80 80 0 1 0 160 16m20 76a16 16 0 1 1 16-16a16 16 0 0 1-16 16"})}),loading:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,a.jsx)("path",{strokeDasharray:"60",strokeDashoffset:"60",strokeOpacity:".3",d:"M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z",children:(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"1.3s",values:"60;0"})}),(0,a.jsxs)("path",{strokeDasharray:"15",strokeDashoffset:"15",d:"M12 3C16.9706 3 21 7.02944 21 12",children:[(0,a.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.3s",values:"15;0"}),(0,a.jsx)("animateTransform",{attributeName:"transform",dur:"1.5s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})]})]})})};var c=t(67836);async function d(e,n,t,a,r,s,o){try{s(l.loading),r("");let i=JSON.stringify({email:e,password:n,token:o}),c=JSON.stringify({email:e,password:n,mfaToken:a}),d=await fetch("https://guns.lol/api/auth/login",{method:"POST",body:t?c:i}),u=await d.json();if(d.ok){if(u.mfa)return!0;return 200}r(u.error),t&&s("Submit")}catch(e){return console.error(e.message),!1}finally{t||s("Login")}}var u=t(16463),h=t(18916),g=t(1529),m=t(31877);function f(e){let{setMfa:n,email:t,setEmail:s,password:f,setPassword:p,error:x,setError:w,text:_,setText:j}=e,v=(0,u.useSearchParams)().get("returnUri")||"/account",[C,{open:P,close:y}]=(0,h.q)(!1);async function N(e){q(e)}async function k(e){y(),e.startsWith("300")?w("Please disable VPN/Proxy and try again."):w("Invalid captcha. Please refresh the page and try again. (".concat(e,")"))}let T=e=>{"Enter"===e.key&&(e.preventDefault(),S())},q=async e=>{y();let a=await d(t,f,!1,"",w,j,e);!0===a?(w(""),n(!0)):a&&200===a&&(location.href=v)};(0,r.useEffect)(()=>{Object.assign(window,{getToken:N,getError:k})},[]);let S=()=>{P(),setTimeout(()=>{"turnstile"in window&&window.turnstile.render(".cf-turnstile",{sitekey:"0x4AAAAAAAiZlunD1XPEsBtZ",errorCallback:k,callback:N})},100)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.default,{strategy:"afterInteractive",src:"https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",id:"_turnstilelogin"}),(0,a.jsx)("style",{children:"\n				.mantine-Modal-header {\n					display: flex;\n					justify-content: center;\n				}\n				"}),(0,a.jsx)(g.u,{opened:C,centered:!0,withCloseButton:!1,onClose:y,title:"Verifying your request...",children:(0,a.jsx)("div",{className:o().captchaWrapper,children:(0,a.jsx)("div",{className:"cf-turnstile"})})}),(0,a.jsx)("div",{className:o().loginContainerWrapper,children:(0,a.jsxs)("div",{className:o().loginContainer,children:[(0,a.jsxs)("div",{className:o().logoContainer,children:[(0,a.jsx)(i.default,{href:"/",className:"flex",children:(0,a.jsx)("img",{src:"https://assets.guns.lol/guns_logo_no_background_cropped.png",alt:""})}),(0,a.jsx)("h1",{children:"Log in to your account"})]}),(0,a.jsxs)("div",{className:o().loginOptions,children:[(0,a.jsxs)("span",{className:o().discordLogin,onClick:()=>{window.open("https://discord.com/api/oauth2/authorize?client_id=1140632236509642882&response_type=code&state=".concat(encodeURIComponent(v),"&redirect_uri=").concat(encodeURIComponent("https://guns.lol/api/auth/login"),"&scope=identify"),"_self")},children:[l.discord," Discord"]}),(0,a.jsx)("div",{className:o().loginSeperator,children:(0,a.jsx)("span",{children:"Or with email"})}),(0,a.jsxs)("div",{className:o().emailLogin,children:[(0,a.jsx)(c.Z,{featureName:"Email",value:t,onKeyPress:T,onChangeFunction:e=>{s(e.target.value)},placeholder:"Email",icon:l.email}),(0,a.jsxs)("div",{className:o().forgotPassword,children:[(0,a.jsx)(c.Z,{featureName:"Password",value:f,onChangeFunction:e=>{p(e.target.value)},placeholder:"Password",icon:l.password,onKeyPress:T,viewPassword:!0}),(0,a.jsx)(i.default,{href:"/reset",children:"Forgot password?"})]}),""!==x&&(0,a.jsx)("div",{className:o().errorContainer,children:(0,a.jsx)("span",{children:x})}),(0,a.jsxs)("div",{className:o().loginButtonContainer,children:[(0,a.jsx)("span",{className:o().loginButton,onClick:S,children:_}),(0,a.jsxs)("span",{children:["Are you new to guns.lol? ",(0,a.jsx)(i.default,{href:"/register",children:"Create an account"})]})]})]})]})]})})]})}function p(e){let{email:n,password:t,error:s,setError:h,mfaText:g,setMfaText:m}=e,f=(0,u.useSearchParams)().get("returnUri")||"/account",[p,x]=(0,r.useState)(""),w=async()=>{200===await d(n,t,!0,p,h,m,p)&&(location.href=f)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:o().loginContainerWrapper,children:(0,a.jsxs)("div",{className:o().loginContainer,children:[(0,a.jsxs)("div",{className:o().logoContainer,children:[(0,a.jsx)(i.default,{href:"/",className:"flex",children:(0,a.jsx)("img",{src:"https://assets.guns.lol/guns_logo_no_background_cropped.png",alt:""})}),(0,a.jsxs)("div",{className:o().mfaDescription,children:[(0,a.jsx)("h1",{children:"Authentication Code"}),(0,a.jsx)("h3",{children:"Open the two-factor authentication app on your device to view your code."})]})]}),(0,a.jsxs)("div",{className:o().mfaGap,children:[(0,a.jsx)(c.Z,{onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),w())},featureName:"Authentication Code",onChangeFunction:e=>{x(e.target.value)},value:p,placeholder:"2FA Code",icon:l.mfaToken}),""!==s&&(0,a.jsx)("div",{className:o().errorContainer,children:(0,a.jsx)("span",{children:s})}),(0,a.jsx)("span",{onClick:w,className:o().mfaButton,children:g})]})]})})})}function x(){let[e,n]=(0,r.useState)(!1),[t,s]=(0,r.useState)(""),[o,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("Login"),[h,g]=(0,r.useState)("Submit");return(0,a.jsx)(a.Fragment,{children:e?(0,a.jsx)(p,{email:t,password:o,error:l,setError:c,mfaText:h,setMfaText:g}):(0,a.jsx)(f,{setMfa:n,email:t,setEmail:s,password:o,setPassword:i,error:l,setError:c,text:d,setText:u})})}},16463:function(e,n,t){"use strict";var a=t(71169);t.o(a,"redirect")&&t.d(n,{redirect:function(){return a.redirect}}),t.o(a,"useParams")&&t.d(n,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(n,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(n,{useSearchParams:function(){return a.useSearchParams}})},31877:function(e,n,t){"use strict";t.d(n,{default:function(){return r.a}});var a=t(84080),r=t.n(a)},63975:function(e){e.exports={loginContainerWrapper:"loginPage_loginContainerWrapper__Z5Xg6",loginContainer:"loginPage_loginContainer__aHkXs",logoContainer:"loginPage_logoContainer__0tLYC",mfaDescription:"loginPage_mfaDescription__QjOUi",loginOptions:"loginPage_loginOptions__bY1t3",discordLogin:"loginPage_discordLogin__au4Hp",loginSeperator:"loginPage_loginSeperator__huktU",emailLogin:"loginPage_emailLogin__dw8WQ",forgotPassword:"loginPage_forgotPassword___4Kgv",loginButton:"loginPage_loginButton__hxS_A",mfaButton:"loginPage_mfaButton__PzFhw",loginButtonContainer:"loginPage_loginButtonContainer__5DM1i",errorContainer:"loginPage_errorContainer__wpokE",mfaGap:"loginPage_mfaGap__O6KeZ",captchaWrapper:"loginPage_captchaWrapper__06Ysu"}}},function(e){e.O(0,[4377,8783,231,7963,6882,3810,1531,5223,7836,2971,7023,1744],function(){return e(e.s=83411)}),_N_E=e.O()}]);